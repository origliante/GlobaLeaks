<div class="col-md-8">
  <div data-ng-show="preferences.gpg_key_info">
    <div class="alert alert-success">
      <span data-translate>Encryption is enabled!</span>
      <span data-translate>Notifications and Files will be encrypted.</span>
    </div>

    <p>
      <span data-translate>PGP Key details</span>
      <br />
      <span data-translate>The fingerprint is:</span>
      <b>{{preferences.gpg_key_fingerprint}}</b>
    </p>

    <div>
      <pre>{{preferences.gpg_key_info}}</pre>
    </div>

    <div class="form-group table-bordered" data-ng-show="preferences.gpg_key_fingerprint">
      <input data-ng-model="preferences.gpg_key_remove" type="checkbox">
      <label data-translate>Remove the PGP key</label>
    </div>
  </div>

  <div class="form-group">
    <div class="alert alert-danger" data-ng-hide="preferences.gpg_key_fingerprint" data-ng-click="gpg_marketing = ! gpg_marketing" data-ng-init="gpg_marketing=false">
      <b><span data-translate>You've not enabled encryption!</span></b>
      <br /><br />
      <div>
        <a href="https://gnupg.org">GnuPG</a>
        <span data-translate>can be configured to deliver encrypted email and store encrypted files. You  must copy and paste the ascii version of your personal key, and then it will be possibile to update your encryption settings. If you have any doubts, talk to your admin.</span>
      </div>
     </div>
  </div>

  <div class="form-group" data-ng-hide="preferences.gpg_key_fingerprint" data-ng-controller="PGPConfigCtrl">
    <button class="btn btn-success" data-ng-init="send_key=false" data-ng-click="send_key = !send_key">
      <i class="glyphicon glyphicon-plus" data-ng-hide="send_key"></i>
      <i class="glyphicon glyphicon-minus" data-ng-show="send_key"></i>
      <span data-translate>Configure a PGP key</span>
    </button>

    <div data-ng-show="send_key">
        <br />
        <button class="btn btn-success" data-ng-click="generate_key()">
        <span data-translate>Generate PGP Keys</span>
        </button>

        <br />
        <label data-translate>PGP Keys:</label>
        <textarea readonly class="form-control" data-ng-model="preferences.gpg_key_armor"></textarea>
        <textarea readonly class="form-control" data-ng-model="preferences.pgp_key_armor_priv"></textarea>
    </div>

  </div>

  <div class="form-group">
    <button type="submit" class="btn btn-success" data-ng-click="pref_save()">
    <i class="glyphicon glyphicon-ok"></i>
    <span data-translate>Update notification and encryption settings</span>
    </button>
  </div>
</div>

</div>
